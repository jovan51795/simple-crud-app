"use strict";(self.webpackChunksimple_crud=self.webpackChunksimple_crud||[]).push([[578],{3578:(L,f,i)=>{i.r(f),i.d(f,{BlogModule:()=>x});var a=i(6895),u=i(3321),s=i(4006),t=i(8274),p=i(8505),h=i(4004),g=i(2340),I=i(529);let d=(()=>{class o{constructor(n){this.http=n,this.blog=[{id:1,title:"The WOrld War III",description:"Test Description",author:"jovanie",comments:["Good","Bad"]},{id:2,title:"The WOrld War III",description:"Test Description",author:"jovanie",comments:["Good","Bad"]}],this.setBlog=e=>this.http.post(`${g.N.url}/blogs`,e).pipe((0,p.b)(l=>l)),this.editBlog=e=>this.http.put(`${g.N.url}/blogs/${e.id}`,e).pipe((0,p.b)(l=>l)),this.getEditBlog=e=>this.getBlog().pipe((0,h.U)(l=>l.filter(m=>m.id===e))),this.delete=e=>this.http.delete(`${g.N.url}/blogs/${e}`).pipe((0,p.b)(l=>l)),this.deleteAll=()=>{this.blog=[],console.log(this.blog)}}getBlog(){return this.http.get(`${g.N.url}/blogs`).pipe((0,p.b)(n=>n))}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(I.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function T(o,r){1&o&&(t.TgZ(0,"div",21),t._uU(1," Please provide a valid city. "),t.qZA())}function B(o,r){1&o&&(t.TgZ(0,"div",5)(1,"label",18),t._uU(2,"ID"),t.qZA(),t._UZ(3,"input",19),t.YNc(4,T,2,0,"div",20),t.qZA()),2&o&&(t.xp6(4),t.Q6J("ngIf",!0))}function A(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"div",22),t._UZ(1,"input",23),t.TgZ(2,"button",24),t.NdJ("click",function(){const m=t.CHM(n).index,b=t.oxw();return t.KtG(b.deleteComment(m))}),t._uU(3,"Del"),t.qZA()()}if(2&o){const n=r.index;t.xp6(1),t.Q6J("formControlName",n)}}let C=(()=>{class o{constructor(n,e,l){this.fb=n,this.route=e,this.blogService=l,this.addComments=()=>{this.commentsFormArray.push(new s.NI(""))},this.save=()=>{const m=this.blogFormGroup.getRawValue();return"false"===this.paramId?this.blogService.setBlog(m).subscribe():this.blogService.editBlog(m).subscribe()},this.deleteComment=m=>{this.commentsFormArray.removeAt(m)},this.paramId=this.route.snapshot.paramMap.get("id"),this.blogFormGroup=this.fb.group({id:[],title:[""],description:[""],author:[""],comments:this.fb.array([])}),this.commentsFormArray=this.blogFormGroup.get("comments"),"false"===this.paramId?this.blogItems=[{id:0,title:"",description:"",author:"",comments:[""]}]:this.sub=this.blogService.getEditBlog(parseInt(this.paramId)).subscribe(m=>{this.blogFormGroup.patchValue(m[0]);for(let b of m[0].comments)this.commentsFormArray.push(new s.NI(b))})}ngOnInit(){}ngOnDestroy(){this.sub?.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(s.qu),t.Y36(u.gz),t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blog-form"]],decls:27,vars:3,consts:[[1,"container","m-4","justify-content-center","d-flex","align-items-center"],[1,"card",2,"width","70%"],[3,"formGroup"],[1,"card-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","formControlName","title",1,"form-control"],["for","description",1,"form-label"],["type","text","formControlName","description",1,"form-control"],["for","author",1,"form-label"],["type","text","formControlName","author",1,"form-control"],["formArrayName","comments"],["for","authors",1,"form-label"],["class","input-group mb-3",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bg-primary","d-flex","align-items-center","justify-content-end"],["type","button",1,"mt-2","mb-2","m-4","btn","btn-success",3,"click"],["for","id",1,"form-label"],["type","text","formControlName","id",1,"form-control"],["class","invalid-feedback",4,"ngIf"],[1,"invalid-feedback"],[1,"input-group","mb-3"],["type","text",1,"form-control",3,"formControlName"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2)(3,"div",3),t.YNc(4,B,5,1,"div",4),t.TgZ(5,"div",5)(6,"label",6),t._uU(7,"Title"),t.qZA(),t._UZ(8,"input",7),t.qZA(),t.TgZ(9,"div",5)(10,"label",8),t._uU(11,"Description"),t.qZA(),t._UZ(12,"input",9),t.qZA(),t.TgZ(13,"div",5)(14,"label",10),t._uU(15,"Author"),t.qZA(),t._UZ(16,"input",11),t.qZA(),t.ynx(17,12),t.TgZ(18,"div",5)(19,"label",13),t._uU(20,"Comments"),t.qZA(),t.YNc(21,A,4,1,"div",14),t.qZA(),t.TgZ(22,"button",15),t.NdJ("click",function(){return e.addComments()}),t._uU(23," Add Comment "),t.qZA(),t.BQk(),t.qZA(),t.TgZ(24,"div",16)(25,"button",17),t.NdJ("click",function(){return e.save()}),t._uU(26,"Save"),t.qZA()()()()()),2&n&&(t.xp6(2),t.Q6J("formGroup",e.blogFormGroup),t.xp6(2),t.Q6J("ngIf",""===e.paramId),t.xp6(17),t.Q6J("ngForOf",e.commentsFormArray.controls))},dependencies:[a.sg,a.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,s.CE]}),o})();var F=i(4128),c=i(3546),y=i(9835),v=i(4850),Z=i(4859);function U(o,r){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const n=r.$implicit;t.xp6(1),t.Oqu(n)}}const _=function(o){return["form",o]};let N=(()=>{class o{constructor(n,e){this.route=n,this.blogs=e,this.actionEmetter=new t.vpe,this.cardAction=l=>{this.actionEmetter.emit(l)}}ngOnInit(){}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(u.F0),t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blog-item"]],inputs:{blogItem:"blogItem"},outputs:{actionEmetter:"actionEmetter"},decls:35,vars:9,consts:[[1,"title-wrapper"],["mat-card-title","",1,"title"],[1,"author-container"],[4,"ngFor","ngForOf"],[1,"card-footer"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div")(1,"mat-card-header",0)(2,"div",1),t._uU(3),t.qZA()(),t._UZ(4,"mat-divider"),t.TgZ(5,"mat-card-title-group")(6,"mat-card-subtitle"),t._uU(7,"ID"),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"mat-card-title-group")(11,"mat-card-subtitle"),t._uU(12,"TITLE"),t.qZA(),t.TgZ(13,"p"),t._uU(14),t.qZA()(),t.TgZ(15,"mat-card-title-group")(16,"mat-card-subtitle"),t._uU(17,"DESSCRIPTION"),t.qZA(),t.TgZ(18,"p"),t._uU(19),t.qZA()(),t.TgZ(20,"mat-card-title-group")(21,"mat-card-subtitle"),t._uU(22,"AUTHOR"),t.qZA(),t.TgZ(23,"p"),t._uU(24),t.qZA()(),t.TgZ(25,"mat-card-title-group")(26,"mat-card-subtitle"),t._uU(27,"COMMENTS"),t.qZA(),t.TgZ(28,"div",2),t.YNc(29,U,2,1,"p",3),t.qZA()()(),t.TgZ(30,"div",4)(31,"button",5),t._uU(32,"EDIT"),t.qZA(),t.TgZ(33,"button",6),t.NdJ("click",function(){return e.cardAction(null==e.blogItem?null:e.blogItem.id)}),t._uU(34,"DELETE"),t.qZA()()),2&n&&(t.xp6(3),t.Oqu(null==e.blogItem?null:e.blogItem.title),t.xp6(6),t.Oqu(null==e.blogItem?null:e.blogItem.id),t.xp6(5),t.Oqu(null==e.blogItem?null:e.blogItem.title),t.xp6(5),t.Oqu(null==e.blogItem?null:e.blogItem.description),t.xp6(5),t.Oqu(null==e.blogItem?null:e.blogItem.author),t.xp6(5),t.Q6J("ngForOf",null==e.blogItem?null:e.blogItem.comments),t.xp6(2),t.Q6J("routerLink",t.VKq(7,_,null==e.blogItem?null:e.blogItem.id)))},dependencies:[a.sg,u.rH,c.dk,c.C1,c.n5,c.$j,v.d,Z.lW]}),o})();function q(o,r){if(1&o){const n=t.EpF();t.TgZ(0,"mat-card",2)(1,"app-blog-item",3),t.NdJ("actionEmetter",function(l){t.CHM(n);const m=t.oxw();return t.KtG(m.action(l))}),t.qZA()()}if(2&o){const n=r.$implicit;t.xp6(1),t.Q6J("blogItem",n)}}const O=[{path:"",component:(()=>{class o{constructor(n){this.blogService=n,this.blogs=[],this.deleteAllBlog=()=>{for(let e of this.blogs)this.action(e.id)},this.sub=n.getBlog().subscribe(e=>{this.blogs=e})}ngOnInit(){}action(n){this.sub=(0,F.D)([this.blogService.delete(n),this.blogService.getBlog()]).pipe((0,h.U)(([e,l])=>{this.blogs=l})).subscribe()}ngOnDestroy(){this.sub?.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-blog-list"]],decls:3,vars:1,consts:[[3,"deleteAllEmitter"],["class","example-card",4,"ngFor","ngForOf"],[1,"example-card"],[1,"app-book",3,"blogItem","actionEmetter"]],template:function(n,e){1&n&&(t.TgZ(0,"app-command-bar",0),t.NdJ("deleteAllEmitter",function(){return e.deleteAllBlog()}),t.qZA(),t.TgZ(1,"section"),t.YNc(2,q,2,1,"mat-card",1),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngForOf",e.blogs))},dependencies:[a.sg,c.a8,y.H,N]}),o})()},{path:"form/:id",component:C}];let E=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(O),a.ez,u.Bz]}),o})();var J=i(782),S=i(1075);let x=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[s.qu],imports:[a.ez,E,c.QW,v.t,J.N6,Z.ot,S.m,s.UX,s.u5]}),o})()}}]);